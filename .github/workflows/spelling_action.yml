# yaml-language-server: $schema=https://www.schemastore.org/github-workflow.json
name: Spellcheck Action
on:
    push:
        paths-ignore:
            - "*"
            - "*/**"
            - "!src/**"
            - "**/CHANGELOG.md"
            - "CHANGELOG.md"
    pull_request:
        paths-ignore:
            - "*"
            - "*/**"
            - "!src/**"
            - "**/CHANGELOG.md"
            - "CHANGELOG.md"
    workflow_dispatch:
concurrency:
    group: spellcheck-${{ github.ref }}
    cancel-in-progress: false
permissions:
    contents: read

jobs:
    build:
        name: Spellcheck
        runs-on: ubuntu-latest
        steps:
            - name: Harden the runner (Audit all outbound calls)
              uses: step-security/harden-runner@95d9a5deda9de15063e7595e9719c11c38c90ae2 # v2.13.2
              with:
                  egress-policy: audit

            - uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8 # v5.0.0
            - uses: rojopolis/spellcheck-github-actions@6f2326b663e2dbab920da0fc4144b9f3202434ba # 0.54.0
              name: Spellcheck
              continue-on-error: true
              with:
                  config_path: .github/.spellcheck.yml
                  output_file: spellcheck-output.txt
            - uses: actions/upload-artifact@330a01c490aca151604b8cf639adc76d48f6c5d4 # v5.0.0
              if: ${{ !cancelled() }}
              with:
                  name: Spellcheck Output
                  path: spellcheck-output.txt
