# yaml-language-server: $schema=https://www.schemastore.org/github-workflow.json
name: Spellcheck Action
on:
    push:
        paths-ignore:
            - "*"
            - "*/**"
            - "!src/**"
            - "**/CHANGELOG.md"
            - "CHANGELOG.md"
    pull_request:
        paths-ignore:
            - "*"
            - "*/**"
            - "!src/**"
            - "**/CHANGELOG.md"
            - "CHANGELOG.md"
    workflow_dispatch:
concurrency:
    group: spellcheck-${{ github.ref }}
    cancel-in-progress: false
permissions:
    contents: read

jobs:
    build:
        name: Spellcheck
        runs-on: ubuntu-latest
        steps:
            - name: Harden the runner (Audit all outbound calls)
              uses: step-security/harden-runner@df199fb7be9f65074067a9eb93f12bb4c5547cf2 # v2.13.3
              with:
                  egress-policy: audit

            - uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1
            - uses: rojopolis/spellcheck-github-actions@16d0338a5a3b5e3111a078029fb9a07a8125053d # 0.55.0
              name: Spellcheck
              continue-on-error: true
              with:
                  config_path: .github/.spellcheck.yml
                  output_file: spellcheck-output.txt
            - uses: actions/upload-artifact@330a01c490aca151604b8cf639adc76d48f6c5d4 # v5.0.0
              if: ${{ !cancelled() }}
              with:
                  name: Spellcheck Output
                  path: spellcheck-output.txt
