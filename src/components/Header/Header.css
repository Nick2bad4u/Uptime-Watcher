/* stylelint-disable a11y/selector-pseudo-class-focus -- TODO: Create Script to Fix at release to reduce LoC */
/* stylelint-disable a11y/media-prefers-reduced-motion -- TODO: Create Script to Fix at release to reduce LoC */
/* stylelint-disable scss/function-color-relative -- file relies on color-mix for gradients */

@keyframes header-control-enter {
    from {
        opacity: 0;
        transform: translate3d(24px, 0, 0);
    }

    to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
    }
}

.app-topbar {
    position: relative;
    z-index: var(--z-index-header, 50);
    overflow: hidden;
    padding: clamp(0.85rem, 0.72rem + 0.55vi, 1.2rem)
        clamp(1rem, 1.25rem + 1.15vi, 2rem)
        clamp(0.6rem, 0.45rem + 0.65vi, 0.95rem);
    backdrop-filter: blur(14px) saturate(1.08);
    background: linear-gradient(
        180deg,
        color-mix(
                in srgb,
                var(--color-app-background, rgb(8 14 26)) 92%,
                transparent
            )
            0%,
        color-mix(
                in srgb,
                var(--color-app-background, rgb(8 14 26)) 70%,
                transparent
            )
            50%,
        transparent 100%
    );
    inset-block-start: auto;
    isolation: isolate;

    &::before {
        position: absolute;
        z-index: 0;
        background:
            radial-gradient(
                140% 100% at 0% 0%,
                color-mix(in srgb, var(--color-primary-500) 18%, transparent),
                transparent 65%
            ),
            radial-gradient(
                120% 90% at 100% 0%,
                color-mix(in srgb, var(--color-status-up) 14%, transparent),
                transparent 60%
            );
        content: "";
        filter: blur(64px);
        inset: -40% -15% 0;
        opacity: 0.38;
        pointer-events: none;
    }

    &::after {
        position: absolute;
        z-index: 0;
        background-image:
            radial-gradient(
                circle,
                rgb(255 255 255 / 18%) 1px,
                transparent 50%
            ),
            radial-gradient(
                circle,
                color-mix(in srgb, var(--color-primary-200) 60%, transparent)
                    0.8px,
                transparent 45%
            );
        background-position:
            0 0,
            140px 120px;
        background-size:
            280px 240px,
            360px 320px;
        content: "";
        inset: -20% -10% 0;
        mix-blend-mode: screen;
        opacity: 0.08;
        pointer-events: none;
    }
}

.app-topbar__container {
    position: relative;
    overflow: hidden;
    border: 1px solid
        color-mix(in srgb, var(--color-border-secondary) 44%, transparent);
    backdrop-filter: blur(24px);
    background: linear-gradient(
        135deg,
        color-mix(in srgb, var(--color-surface-elevated) 97%, transparent) 0%,
        color-mix(in srgb, var(--color-surface-overlay) 90%, transparent) 100%
    );
    box-shadow:
        0 22px 48px -10px rgb(8 12 24 / 40%),
        0 10px 22px -8px rgb(8 12 24 / 28%),
        inset 0 0 0 1px rgb(255 255 255 / 4%);
    inline-size: min(100%, 120rem);
    margin-inline: auto;

    &::before {
        position: absolute;
        z-index: 0;
        border-radius: inherit;
        background:
            radial-gradient(
                140% 120% at 8% -10%,
                color-mix(in srgb, var(--color-primary-500) 12%, transparent),
                transparent 70%
            ),
            radial-gradient(
                100% 100% at 95% 0%,
                color-mix(in srgb, var(--color-status-up) 10%, transparent),
                transparent 65%
            );
        content: "";
        filter: blur(60px);
        inset: 0;
        opacity: 0.5;
        pointer-events: none;
    }

    &::after {
        position: absolute;
        z-index: 0;
        background-image: radial-gradient(
            circle,
            rgb(255 255 255 / 12%) 1px,
            transparent 45%
        );
        background-position: 0 0;
        background-size: 320px 280px;
        content: "";
        inset: 0;
        mix-blend-mode: screen;
        opacity: 0.08;
        pointer-events: none;
    }

    &.themed-box--padding-lg {
        padding-block: clamp(1.25rem, 1rem + 0.75vi, 1.75rem);
        padding-inline: clamp(1.5rem, 1.2rem + 1.2vi, 2.25rem);
    }
}

.app-topbar__grid {
    position: relative;
    z-index: 1;
    display: grid;
    align-items: stretch;
    gap: clamp(0.95rem, 0.8rem + 0.8vi, 1.45rem);
    grid-template-columns:
        [topbar-left] minmax(0, 1.2fr)
        [topbar-center] minmax(0, 1.5fr)
        [topbar-right] minmax(220px, 0.7fr)
        [topbar-end];
    padding-inline-end: clamp(0.8rem, 0.65rem + 0.65vi, 1.1rem);
}

.app-topbar__status-indicator {
    position: absolute;
    z-index: 2;
    inset-block-start: clamp(1rem, 0.85rem + 0.6vi, 1.45rem);
    inset-inline-end: clamp(1.4rem, 1.15rem + 1.1vi, 2.1rem);
}

.app-topbar__summary-bar {
    display: flex;
    justify-content: center;
    margin-block-start: clamp(0.9rem, 0.72rem + 0.65vi, 1.25rem);
}

.app-topbar__identity {
    display: flex;
    flex: 1 1 320px;
    align-items: center;
    gap: 1rem;
    min-inline-size: 0;
}

.app-topbar__identity-text,
.app-topbar__badge-body {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    min-inline-size: 0;
}

.app-topbar__sidebar-toggle {
    border: 1px solid
        color-mix(in srgb, var(--color-primary-500) 32%, transparent);
    border-radius: 0.85rem;
    background: linear-gradient(
        135deg,
        color-mix(in srgb, var(--color-primary-500) 22%, transparent),
        color-mix(in srgb, var(--color-primary-500) 8%, transparent)
    );
    block-size: 2.5rem;
    box-shadow: 0 14px 32px
        color-mix(in srgb, var(--color-primary-500) 30%, transparent);
    color: color-mix(
        in srgb,
        var(--color-primary-500) 68%,
        rgb(255 255 255) 32%
    );
    inline-size: 2.5rem;
    line-height: 1;
    transition:
        transform var(--transition-fast),
        box-shadow var(--transition-fast),
        border-color var(--transition-fast);

    &:hover {
        border-color: color-mix(
            in srgb,
            var(--color-primary-500) 40%,
            transparent
        );
        box-shadow: 0 16px 36px
            color-mix(in srgb, var(--color-primary-500) 34%, transparent);
        transform: translateY(-1px) scale(1.02);
    }

    & svg {
        display: inline-block;
    }
}

.app-topbar__title {
    color: color-mix(
        in srgb,
        var(--color-text-primary, rgb(248 250 252)) 96%,
        rgb(255 255 255) 4%
    );
    font-size: clamp(1.25rem, 1.125rem + 0.65vi, 1.75rem);
    letter-spacing: -0.01em;
    line-height: 1.25;
    text-shadow:
        0 10px 24px rgb(37 99 235 / 30%),
        0 3px 10px rgb(2 8 23 / 55%);
}

.app-topbar__subtitle {
    color: color-mix(
        in srgb,
        var(--color-text-secondary, rgb(148 163 184)) 90%,
        transparent
    );
    font-size: clamp(0.75rem, 0.75rem + 0.25vi, 0.875rem);
    letter-spacing: 0.02em;
    line-height: 1.375;
    margin-block-start: 0.25rem;
    text-shadow: 0 6px 16px rgb(15 23 42 / 45%);
}

.app-topbar__badges {
    display: flex;
    flex-wrap: wrap;
    gap: clamp(0.75rem, 0.6rem + 0.55vi, 1rem);
    min-inline-size: 0;
}

.app-topbar__metrics {
    display: flex;
    flex-direction: column;
    gap: clamp(1rem, 0.85rem + 0.5vi, 1.4rem);
    min-inline-size: 0;
}

.app-topbar__badge {
    display: flex;
    flex: 1 1 clamp(13rem, 11.5rem + 2.5vi, 15rem);
    align-items: center;
    padding: clamp(0.82rem, 0.72rem + 0.3vi, 1rem)
        clamp(0.92rem, 0.82rem + 0.35vi, 1.1rem);
    border: 1px solid
        color-mix(in srgb, var(--color-border-secondary) 46%, transparent);
    border-radius: 1.125rem;
    background: color-mix(
        in srgb,
        var(--color-surface-elevated) 96%,
        transparent
    );
    box-shadow:
        inset 0 0 0 1px rgb(255 255 255 / 4%),
        0 12px 28px -6px rgb(8 12 24 / 26%);
    gap: 0.75rem;
    min-inline-size: clamp(11.5rem, 10rem + 2.5vi, 13.5rem);
    transition:
        transform var(--transition-fast),
        box-shadow var(--transition-fast);

    &:hover {
        box-shadow:
            inset 0 0 0 1px rgb(255 255 255 / 6%),
            0 16px 32px -8px rgb(8 12 24 / 30%);
        transform: translateY(-1px);
    }
}

.app-topbar__badge-icon {
    display: inline-flex;
    flex-shrink: 0;
    align-items: center;
    justify-content: center;
    border-radius: 0.9375rem;
    background: color-mix(
        in srgb,
        var(--color-primary-500) 14%,
        var(--color-surface-overlay) 86%
    );
    block-size: 2.25rem;
    box-shadow:
        inset 0 0 0 1px rgb(255 255 255 / 8%),
        0 14px 32px -4px rgb(8 12 24 / 28%);
    color: color-mix(
        in srgb,
        var(--color-primary-500) 76%,
        rgb(255 255 255) 24%
    );
    inline-size: 2.25rem;
    pointer-events: none;

    .app-topbar__badge--primary & {
        background: color-mix(
            in srgb,
            var(--color-primary-500) 26%,
            var(--color-surface-overlay) 74%
        );
        color: color-mix(
            in srgb,
            var(--color-primary-500) 82%,
            rgb(255 255 255) 18%
        );
    }
}

.app-topbar__badge-label {
    color: color-mix(
        in srgb,
        var(--color-text-secondary) 90%,
        rgb(255 255 255) 10%
    );
    font-size: 0.625rem;
    font-weight: var(--font-weight-medium);
    letter-spacing: 0.12em;
    line-height: 1.25;
    text-transform: uppercase;
}

.app-topbar__badge-value {
    color: var(--color-text-primary);
    font-size: clamp(1.125rem, 1rem + 0.35vi, 1.25rem);
    font-weight: var(--font-weight-semibold);
    letter-spacing: -0.01em;
    line-height: 1.25;
    margin-block-start: 0.125rem;
}

.app-topbar__badge--primary {
    border-color: color-mix(in srgb, var(--color-primary-500) 32%, transparent);
    background: linear-gradient(
        135deg,
        color-mix(in srgb, var(--color-primary-500) 22%, transparent),
        color-mix(in srgb, var(--color-primary-500) 8%, transparent)
    );
    box-shadow:
        inset 0 0 0 1px rgb(255 255 255 / 8%),
        0 18px 40px
            color-mix(in srgb, var(--color-primary-500) 28%, transparent);

    & .app-topbar__badge-label {
        color: color-mix(
            in srgb,
            var(--color-primary-500) 58%,
            rgb(255 255 255) 42%
        );
    }

    & .app-topbar__badge-value {
        color: color-mix(
            in srgb,
            var(--color-primary-500) 74%,
            rgb(255 255 255) 26%
        );
    }
}

.app-topbar__controls {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    align-self: stretch;
    justify-content: flex-start;
    gap: 0.65rem;
}

.app-topbar__controls--stacked {
    flex-direction: column;
    gap: 0.75rem;
}

.header-controls {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.55rem;
}

.header-controls__button {
    --header-control-color: var(--color-primary-500);

    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.52rem 0.82rem;
    border: 1px solid
        color-mix(in srgb, var(--header-control-color) 26%, transparent);
    border-radius: 0.85rem;
    animation: header-control-enter var(--transition-normal) ease-out both;
    animation-delay: calc(var(--header-control-order, 0) * 0.1s);
    background: color-mix(
        in srgb,
        var(--header-control-color) 14%,
        var(--color-surface-elevated) 86%
    );
    box-shadow: 0 10px 20px
        color-mix(in srgb, var(--header-control-color) 20%, transparent);
    color: color-mix(
        in srgb,
        var(--header-control-color) 74%,
        rgb(255 255 255) 26%
    );
    gap: 0.45rem;
    scale: 1;
    transition:
        border-color var(--transition-fast),
        box-shadow var(--transition-fast);
    translate: 0;

    &:hover {
        border-color: color-mix(
            in srgb,
            var(--header-control-color) 34%,
            transparent
        );
        box-shadow: 0 12px 22px
            color-mix(in srgb, var(--header-control-color) 24%, transparent);
        scale: 1.01;
        translate: 0 -1px;
    }

    &:active {
        scale: 0.97;
        translate: 0;
    }

    @media (prefers-reduced-motion: reduce) {
        animation: none;
    }
}

.header-controls--vertical {
    flex-flow: column nowrap;
    align-items: stretch;
    gap: 0.65rem;
    inline-size: 100%;

    & .header-controls__button {
        justify-content: space-between;
        inline-size: 100%;
    }
}

.header-controls__icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    block-size: 1.15rem;
    inline-size: 1.15rem;
}

.header-controls__label {
    color: color-mix(
        in srgb,
        var(--header-control-color) 82%,
        rgb(255 255 255) 18%
    );
    font-size: 0.75rem;
    font-weight: var(--font-weight-medium);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    white-space: nowrap;
}

.header-controls__button--add {
    --header-control-color: var(--color-status-up);
}

.header-controls__button--theme {
    --header-control-color: color-mix(
        in srgb,
        var(--color-primary-500) 58%,
        var(--color-warning) 42%
    );
}

.header-controls__button--settings {
    --header-control-color: color-mix(
        in srgb,
        var(--color-status-degraded) 40%,
        var(--color-primary-500) 60%
    );
}

.header-status-summary {
    display: flex;
    align-items: center;
    border: 1px solid
        color-mix(in srgb, var(--color-border-secondary) 44%, transparent);
    background: color-mix(
        in srgb,
        var(--color-surface-elevated) 94%,
        transparent
    );
    box-shadow: inset 0 0 0 1px rgb(255 255 255 / 2%);
    min-inline-size: 0;

    .app-topbar__summary-bar & {
        inline-size: 100%;
    }
}

.header-status-summary__container {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 0.4rem;
    inline-size: 100%;
}

.header-status-summary__health {
    display: flex;
    align-items: center;
    padding: 0.5rem 0.75rem;
    border: 1px solid
        color-mix(in srgb, var(--color-status-up) 32%, transparent);
    border-radius: 0.85rem;
    background: linear-gradient(
        135deg,
        color-mix(in srgb, var(--color-status-up) 22%, transparent),
        color-mix(in srgb, var(--color-status-up) 8%, transparent)
    );
    box-shadow:
        inset 0 0 0 1px rgb(255 255 255 / 8%),
        0 8px 16px color-mix(in srgb, var(--color-status-up) 14%, transparent);
    gap: 0.75rem;
}

.header-status-summary__health-meta {
    display: flex;
    flex-direction: column;
    gap: 0.1rem;
}

.header-status-summary__pill {
    display: inline-flex;
    flex-shrink: 0;
    align-items: center;
    padding: 0.4rem 0.62rem;
    border: 1px solid
        color-mix(in srgb, var(--color-border-secondary) 36%, transparent);
    border-radius: 0.75rem;
    background: color-mix(
        in srgb,
        var(--color-surface-elevated) 92%,
        transparent
    );
    gap: 0.5rem;
    transition:
        transform var(--transition-fast),
        box-shadow var(--transition-fast);

    &:hover {
        box-shadow: 0 6px 14px rgb(5 12 24 / 20%);
        transform: translateY(-1px);
    }
}

.header-status-summary__pill--health {
    padding: 0.45rem 0.6rem;
}

.header-status-summary__pill-text {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    line-height: 1;

    & .themed-text {
        line-height: 1;
    }
}

.header-status-summary__dot {
    border-radius: 999px;
    background: color-mix(
        in srgb,
        var(--color-text-secondary) 60%,
        rgb(255 255 255) 20%
    );
    block-size: 0.55rem;
    box-shadow: 0 0 0 2px
        color-mix(in srgb, var(--color-surface-elevated) 70%, transparent);
    inline-size: 0.55rem;
}

/* Status pill overrides */
.status-up-badge {
    border-color: color-mix(in srgb, var(--color-status-up) 32%, transparent);
    background: color-mix(in srgb, var(--color-status-up) 14%, transparent);
}

.status-degraded-badge {
    border-color: color-mix(
        in srgb,
        var(--color-status-degraded) 32%,
        transparent
    );
    background: color-mix(
        in srgb,
        var(--color-status-degraded) 12%,
        transparent
    );
}

.status-down-badge {
    border-color: color-mix(in srgb, var(--color-status-down) 30%, transparent);
    background: color-mix(in srgb, var(--color-status-down) 12%, transparent);
}

.status-pending-badge {
    border-color: color-mix(
        in srgb,
        var(--color-status-pending) 24%,
        transparent
    );
    background: color-mix(
        in srgb,
        var(--color-status-pending) 12%,
        transparent
    );
}

.status-paused-badge {
    border-color: color-mix(
        in srgb,
        var(--color-status-paused) 28%,
        transparent
    );
    background: color-mix(in srgb, var(--color-status-paused) 10%, transparent);
}

.health-badge {
    border-width: 1px;
    border-color: var(--color-success-border, rgb(30 198 162 / 33%));
    background-color: color-mix(in srgb, var(--color-success) 10%, transparent);
    box-shadow: 0 0 0 0 var(--color-shadows-success, rgb(30 198 162 / 22%));
    transition:
        box-shadow 0.22s cubic-bezier(0.4, 1.2, 0.4, 1),
        background 0.22s,
        transform 0.18s;
    will-change: transform, box-shadow;
}

.status-up-badge,
.status-degraded-badge,
.status-down-badge,
.status-pending-badge,
.status-paused-badge {
    transition:
        box-shadow 0.18s,
        background 0.18s,
        transform 0.16s;
    will-change: transform, box-shadow;
}

.health-badge:hover {
    background-color: color-mix(in srgb, var(--color-success) 18%, transparent);
    box-shadow: 0 4px 18px 0 var(--color-shadows-success, rgb(16 185 129 / 33%));
    filter: brightness(1.04) saturate(1.1);
    transform: scale(1.045) translateY(-2px);
}

.status-up-badge:hover {
    background-color: color-mix(in srgb, var(--color-success) 12%, transparent);
    box-shadow: 0 2px 12px 0 var(--color-shadows-success, rgb(16 185 129 / 22%));
    filter: brightness(1.03) saturate(1.08);
    transform: scale(1.04) translateY(-1px);
}

.status-degraded-badge:hover {
    background-color: color-mix(
        in srgb,
        var(--color-status-degraded) 12%,
        transparent
    );
    box-shadow: 0 2px 12px 0
        var(--color-shadows-degraded, rgb(249 115 22 / 22%));
    filter: brightness(1.03) saturate(1.08);
    transform: scale(1.04) translateY(-1px);
}

.status-down-badge:hover {
    background-color: color-mix(in srgb, var(--color-error) 12%, transparent);
    box-shadow: 0 2px 12px 0 var(--color-shadows-error, rgb(239 68 68 / 22%));
    filter: brightness(1.03) saturate(1.08);
    transform: scale(1.04) translateY(-1px);
}

.status-pending-badge:hover {
    background-color: color-mix(in srgb, var(--color-warning) 12%, transparent);
    box-shadow: 0 2px 12px 0 var(--color-shadows-warning, rgb(251 191 36 / 22%));
    filter: brightness(1.03) saturate(1.08);
    transform: scale(1.04) translateY(-1px);
}

.status-paused-badge:hover {
    background-color: color-mix(
        in srgb,
        var(--color-status-paused) 12%,
        transparent
    );
    box-shadow: 0 2px 12px 0 var(--color-shadows-paused, rgb(156 163 175 / 22%));
    filter: brightness(1.03) saturate(1.08);
    transform: scale(1.04) translateY(-1px);
}

/* Remove all default borders and box-shadows from header items */
.header-title-box,
.header-status-summary-box,
.total-sites-badge,
.header-interval-box,
.header-controls-box {
    border: 1.5px solid transparent;
    box-shadow: none;
    outline: none;
    transition:
        box-shadow 0.18s,
        border-color 0.18s,
        outline 0.18s,
        background 0.18s;
}

/* Show visible outlines and subtle background on hover/focus */
.header-title-box:hover,
.header-title-box:focus-visible,
.header-status-summary-box:hover,
.header-status-summary-box:focus-visible,
.header-interval-box:hover,
.header-interval-box:focus-visible,
.header-controls-box:hover,
.header-controls-box:focus-visible {
    border-color: var(--color-primary-500);
    background: rgb(37 99 235 / 6%); /* Fallback color */
    background: color-mix(in srgb, var(--color-primary-500) 6%, transparent);
    box-shadow: 0 2px 12px 0 var(--color-primary-500, rgb(37 99 235 / 22%));
}

.health-badge:hover,
.health-badge:focus-visible {
    border-color: var(--color-success, var(--color-primary-500));
    background: rgb(16 185 129 / 8%); /* Fallback color */
    background: color-mix(
        in srgb,
        var(--color-success, var(--color-primary-500)) 8%,
        transparent
    );
    box-shadow: 0 4px 18px 0 var(--color-shadows-success, rgb(16 185 129 / 33%));
}

.status-up-badge:hover,
.status-up-badge:focus-visible {
    border-color: var(--color-success);
    background: rgb(30 198 162 / 8%); /* Fallback color */
    background: color-mix(in srgb, var(--color-success) 8%, transparent);
    box-shadow: 0 2px 12px 0 var(--color-shadows-success, rgb(30 198 162 / 22%));
}

.status-degraded-badge:hover,
.status-degraded-badge:focus-visible {
    border-color: var(--color-status-degraded);
    background: rgb(245 159 61 / 8%); /* Fallback color */
    background: color-mix(
        in srgb,
        var(--color-status-degraded) 8%,
        transparent
    );
    box-shadow: 0 2px 12px 0
        var(--color-shadows-degraded, rgb(245 159 61 / 22%));
}

.status-down-badge:hover,
.status-down-badge:focus-visible {
    border-color: var(--color-error);
    background: rgb(242 87 107 / 8%); /* Fallback color */
    background: color-mix(in srgb, var(--color-error) 8%, transparent);
    box-shadow: 0 2px 12px 0 var(--color-shadows-error, rgb(242 87 107 / 22%));
}

.status-pending-badge:hover,
.status-pending-badge:focus-visible {
    border-color: var(--color-warning);
    background: rgb(244 195 97 / 8%); /* Fallback color */
    background: color-mix(in srgb, var(--color-warning) 8%, transparent);
    box-shadow: 0 2px 12px 0 var(--color-shadows-warning, rgb(244 195 97 / 22%));
}

.status-paused-badge:hover,
.status-paused-badge:focus-visible {
    border-color: var(--color-status-paused);
    background: rgb(133 147 181 / 8%); /* Fallback color */
    background: color-mix(in srgb, var(--color-status-paused) 8%, transparent);
    box-shadow: 0 2px 12px 0 var(--color-shadows-paused, rgb(133 147 181 / 22%));
}

.total-sites-badge:hover,
.total-sites-badge:focus-visible {
    border-color: var(--color-border-primary);
    background: rgb(95 140 255 / 6%); /* Fallback color */
    background: color-mix(in srgb, var(--color-border-primary) 6%, transparent);
    box-shadow: 0 2px 12px 0
        color-mix(in srgb, var(--color-primary-500) 18%, transparent);
}

.status-subscription-indicator__container {
    display: inline-flex;
    align-items: center;
    column-gap: 0.75rem;
}

.status-subscription-indicator__retry {
    display: inline-flex;
    column-gap: 0.35rem;
    padding-inline: 0.6rem;
}

.status-subscription-indicator__tooltip-listeners {
    display: flex;
    flex-direction: column;
    gap: 0.35rem;
}

.status-subscription-indicator__tooltip-listeners-title {
    letter-spacing: 0.05em;
    text-transform: uppercase;
}

.status-subscription-indicator__tooltip-list {
    display: flex;
    flex-direction: column;
    padding: 0;
    margin: 0;
    gap: 0.2rem;
    list-style: "";
}

.status-subscription-indicator__tooltip-list-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 0.75rem;
    gap: 0.5rem;
}

.status-subscription-indicator__tooltip-list-item--attached span:last-child {
    color: var(--color-status-up);
}

.status-subscription-indicator__tooltip-list-item--detached span:last-child {
    color: var(--color-status-down);
}

.status-subscription-indicator {
    display: inline-flex;
    padding: 0.4rem;
    border: none;
    border-radius: 9999px;
    background: none;
    cursor: pointer;
    transition:
        transform var(--transition-fast),
        box-shadow var(--transition-fast);

    &:hover,
    &:focus-visible {
        box-shadow: 0 6px 18px 0
            color-mix(in srgb, var(--color-primary-500) 16%, transparent);
        transform: translateY(-1px);
    }

    &:focus-visible {
        outline: 2px solid
            color-mix(in srgb, var(--color-primary-500) 75%, transparent);
        outline-offset: 2px;
    }
}

.status-subscription-indicator--requires-action {
    box-shadow: 0 0 0 2px
        color-mix(in srgb, var(--color-status-down) 32%, transparent);
}

.status-subscription-indicator__dot {
    position: relative;
    border-radius: 9999px;
    background: var(--color-status-up);
    block-size: 0.9rem;
    color: var(--color-status-up);
    inline-size: 0.9rem;

    &::after {
        position: absolute;
        border: 1px solid color-mix(in srgb, currentcolor 55%, transparent);
        border-radius: inherit;
        animation: status-subscription-indicator-pulse 2.4s ease-in-out infinite;
        content: "";
        inset: -0.42rem;
        opacity: 0.6;
    }
}

.status-subscription-indicator__dot--healthy {
    background: var(--color-status-up);
    color: var(--color-status-up);
}

.status-subscription-indicator__dot--degraded {
    background: var(--color-status-degraded);
    color: var(--color-status-degraded);
}

.status-subscription-indicator__dot--failed {
    background: var(--color-status-down);
    color: var(--color-status-down);
}

.status-subscription-indicator__dot--unknown {
    background: color-mix(
        in srgb,

        var(--color-border-secondary) 60%,
        transparent
    );
    color: color-mix(in srgb, var(--color-border-secondary) 60%, transparent);
}

@keyframes status-subscription-indicator-pulse {
    0% {
        opacity: 0.45;
        transform: scale(0.6);
    }

    60% {
        opacity: 0;
        transform: scale(1.6);
    }

    100% {
        opacity: 0;
        transform: scale(1.6);
    }
}

.status-subscription-indicator__tooltip {
    display: flex;
    flex-direction: column;
    gap: 0.45rem;
    max-inline-size: 22rem;
}

.status-subscription-indicator__tooltip-header {
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.status-subscription-indicator__tooltip-dot {
    border-radius: 9999px;
    background: var(--color-status-up);
    block-size: 0.5rem;
    inline-size: 0.5rem;
}

.status-subscription-indicator__tooltip-dot--healthy {
    background: var(--color-status-up);
}

.status-subscription-indicator__tooltip-dot--degraded {
    background: var(--color-status-degraded);
}

.status-subscription-indicator__tooltip-dot--failed {
    background: var(--color-status-down);
}

.status-subscription-indicator__tooltip-dot--unknown {
    background: color-mix(
        in srgb,
        var(--color-border-secondary) 60%,
        transparent
    );
}

.status-subscription-indicator__tooltip-description,
.status-subscription-indicator__tooltip-progress,
.status-subscription-indicator__tooltip-summary,
.status-subscription-indicator__tooltip-attempt {
    margin: 0;
    font-size: 0.875rem;
    line-height: 1.375;
}

.status-subscription-indicator__tooltip-summary {
    color: var(--color-text-secondary);
}

.status-subscription-indicator__tooltip-context {
    margin: 0;
    color: var(--color-text-secondary);
    font-size: 0.75rem;
    line-height: 1.375;
}

.status-subscription-indicator__tooltip-errors {
    margin: 0;
    color: var(--color-error, rgb(239 68 68));
    font-size: 0.75rem;
    padding-inline-start: 1rem;
}

.status-subscription-indicator__tooltip-retry {
    display: inline-flex;
    align-items: center;
    align-self: flex-start;
    column-gap: 0.35rem;
}

/* Accessibility: reduce motion */
@media (prefers-reduced-motion: reduce) {
    .header-status-summary,
    .health-badge,
    .status-up-badge,
    .status-degraded-badge,
    .status-down-badge,
    .status-pending-badge,
    .status-paused-badge,
    .total-sites-badge {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.75rem 1rem;
        border: 1px solid
            color-mix(in srgb, var(--color-border-secondary) 48%, transparent);
        border-radius: 0.95rem;
        background: color-mix(
            in srgb,
            var(--color-surface-elevated) 92%,
            transparent
        );
        box-shadow:
            inset 0 0 0 1px rgb(255 255 255 / 4%),
            0 14px 30px rgb(8 12 24 / 22%);
        gap: 0.75rem;
        transition:
            border-color var(--transition-fast),
            box-shadow var(--transition-fast),
            transform var(--transition-fast);
    }

    .status-subscription-indicator__dot::after {
        animation: none;
    }

    .status-paused-badge,
    .total-sites-badge {
        animation: none;
        transform: none;
        transition: none;
    }
}

@media (width <= 1280px) {
    .app-topbar__grid {
        gap: clamp(0.8rem, 0.65rem + 0.45vi, 1.1rem);
        grid-template-columns:
            [topbar-left] minmax(0, 1fr)
            [topbar-center] minmax(0, 1.35fr)
            [topbar-right] minmax(11.75rem, 0.62fr)
            [topbar-end];
        padding-inline-end: clamp(0.55rem, 0.45rem + 0.28vi, 0.75rem);
    }

    .app-topbar__controls {
        justify-self: end;
        max-inline-size: 12.4rem;
    }

    .header-controls--vertical .header-controls__button {
        padding: 0.5rem 0.72rem;
        min-block-size: 2.2rem;
    }

    .header-controls__label {
        font-size: 0.75rem;
        letter-spacing: 0.065em;
    }
}

@media (width <= 1024px) {
    .app-topbar__grid {
        grid-template-columns: [topbar-stack] 1fr [topbar-stack-end];
    }

    .app-topbar__controls {
        justify-content: flex-start;
        inline-size: 100%;
    }

    .header-controls {
        inline-size: 100%;
    }

    .header-controls--vertical {
        flex-flow: row wrap;
        align-items: stretch;
        gap: 0.55rem;

        & .header-controls__button {
            flex: 1 1 calc(33.333% - 0.45rem);
            justify-content: center;
            padding: 0.52rem 0.72rem;
            min-inline-size: 8.9rem;
        }
    }
}

@media (width <= 760px) {
    .header-controls--vertical {
        flex-flow: row wrap;
        gap: 0.5rem;

        & .header-controls__button {
            flex: 1 1 calc(50% - 0.5rem);
            justify-content: center;
            padding: 0.55rem 0.75rem;
        }
    }
}

@media (width <= 620px) {
    .header-controls--vertical .header-controls__button {
        flex: 1 1 calc(33.333% - 0.4rem);
        padding: 0.55rem 0.6rem;
        min-inline-size: 2.8rem;
    }

    .header-controls__label {
        display: none;
    }
}
